{"version":3,"sources":["ErrorMessage.js","SignMessage.js","SuccessMessage.js","VerifyMessage.js","App.js","index.js"],"names":["ErrorMessage","message","className","xmlns","fill","viewBox","d","signMessage","a","setError","console","log","window","ethereum","Error","send","provider","ethers","providers","Web3Provider","signer","getSigner","signature","getAddress","address","SignMessage","resultBox","useRef","useState","signatures","setSignatures","error","handleSign","e","preventDefault","data","FormData","target","get","sig","onSubmit","required","type","name","placeholder","map","idx","readOnly","ref","value","SuccessMessage","verifyMessage","utils","VerifyMessage","successMsg","setSuccessMsg","handleVerification","App","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.df906d46.chunk.js","sourcesContent":["export default function ErrorMessage({ message }) {\n  if (!message) return null;\n\n  return (\n    <div className=\"alert alert-error\">\n      <div className=\"flex-1\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          className=\"w-6 h-6 mx-2 stroke-current\"\n        >\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636\"\n          ></path>\n        </svg>\n        <label>{message}</label>\n      </div>\n    </div>\n  );\n}\n","import { useState, useRef } from \"react\";\nimport { ethers } from \"ethers\";\nimport ErrorMessage from \"./ErrorMessage\";\n\nconst signMessage = async ({ setError, message }) => {\n  try {\n    console.log({ message });\n    if (!window.ethereum)\n      throw new Error(\"No crypto wallet found. Please install it.\");\n\n    await window.ethereum.send(\"eth_requestAccounts\");\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.getSigner();\n    const signature = await signer.signMessage(message);\n    const address = await signer.getAddress();\n\n    return {\n      message,\n      signature,\n      address\n    };\n  } catch (err) {\n    setError(err.message);\n  }\n};\n\nexport default function SignMessage() {\n  const resultBox = useRef();\n  const [signatures, setSignatures] = useState([]);\n  const [error, setError] = useState();\n\n  const handleSign = async (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    setError();\n    const sig = await signMessage({\n      setError,\n      message: data.get(\"message\")\n    });\n    if (sig) {\n      setSignatures([...signatures, sig]);\n    }\n  };\n\n  return (\n    <form className=\"m-4\" onSubmit={handleSign}>\n      <div className=\"credit-card w-full shadow-lg mx-auto rounded-xl bg-white\">\n        <main className=\"mt-4 p-4\">\n          <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\n            Sign messages\n          </h1>\n          <div className=\"\">\n            <div className=\"my-3\">\n              <textarea\n                required\n                type=\"text\"\n                name=\"message\"\n                className=\"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none\"\n                placeholder=\"Message\"\n              />\n            </div>\n          </div>\n        </main>\n        <footer className=\"p-4\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\n          >\n            Sign message\n          </button>\n          <ErrorMessage message={error} />\n        </footer>\n        {signatures.map((sig, idx) => {\n          return (\n            <div className=\"p-2\" key={sig}>\n              <div className=\"my-3\">\n                <p>\n                  Message {idx + 1}: {sig.message}\n                </p>\n                <p>Signer: {sig.address}</p>\n                <textarea\n                  type=\"text\"\n                  readOnly\n                  ref={resultBox}\n                  className=\"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none\"\n                  placeholder=\"Generated signature\"\n                  value={sig.signature}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </form>\n  );\n}\n","export default function SuccessMessage({ message }) {\n  if (!message) return null;\n\n  return (\n    <div className=\"alert alert-success\">\n      <div className=\"flex-1\">\n        <label>{message}</label>\n      </div>\n    </div>\n  );\n}\n","import { useState, useRef } from \"react\";\nimport { ethers } from \"ethers\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport SuccessMessage from \"./SuccessMessage\";\n\nconst verifyMessage = async ({ message, address, signature }) => {\n  try {\n    const signerAddr = await ethers.utils.verifyMessage(message, signature);\n    if (signerAddr !== address) {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    console.log(err);\n    return false;\n  }\n};\n\nexport default function VerifyMessage() {\n  const [error, setError] = useState();\n  const [successMsg, setSuccessMsg] = useState();\n\n  const handleVerification = async (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    setSuccessMsg();\n    setError();\n    const isValid = await verifyMessage({\n      setError,\n      message: data.get(\"message\"),\n      address: data.get(\"address\"),\n      signature: data.get(\"signature\")\n    });\n\n    if (isValid) {\n      setSuccessMsg(\"Signature is valid!\");\n    } else {\n      setError(\"Invalid signature\");\n    }\n  };\n\n  return (\n    <form className=\"m-4\" onSubmit={handleVerification}>\n      <div className=\"credit-card w-full shadow-lg mx-auto rounded-xl bg-white\">\n        <main className=\"mt-4 p-4\">\n          <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\n            Verify signature\n          </h1>\n          <div className=\"\">\n            <div className=\"my-3\">\n              <textarea\n                required\n                type=\"text\"\n                name=\"message\"\n                className=\"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none\"\n                placeholder=\"Message\"\n              />\n            </div>\n            <div className=\"my-3\">\n              <textarea\n                required\n                type=\"text\"\n                name=\"signature\"\n                className=\"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none\"\n                placeholder=\"Signature\"\n              />\n            </div>\n            <div className=\"my-3\">\n              <input\n                required\n                type=\"text\"\n                name=\"address\"\n                className=\"textarea w-full input input-bordered focus:ring focus:outline-none\"\n                placeholder=\"Signer address\"\n              />\n            </div>\n          </div>\n        </main>\n        <footer className=\"p-4\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\n          >\n            Verify signature\n          </button>\n        </footer>\n        <div className=\"p-4 mt-4\">\n          <ErrorMessage message={error} />\n          <SuccessMessage message={successMsg} />\n        </div>\n      </div>\n    </form>\n  );\n}\n","import SignMessage from \"./SignMessage\";\nimport VerifyMessage from \"./VerifyMessage\";\n\nexport default function App() {\n  return (\n    <div className=\"flex flex-wrap\">\n      <div className=\"w-full lg:w-1/2\">\n        <SignMessage />\n      </div>\n      <div className=\"w-full lg:w-1/2\">\n        <VerifyMessage />\n      </div>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}